<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Laserterapia • Protocolos (Busca Rápida)</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#121a2b;
      --muted:#8aa0c2;
      --text:#eaf1ff;
      --accent:#5eead4;
      --accent2:#60a5fa;
      --warn:#fbbf24;
      --danger:#fb7185;
      --ok:#34d399;
      --border:rgba(255,255,255,.10);
      --shadow:0 12px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 0%, rgba(96,165,250,.18), transparent 60%),
                  radial-gradient(900px 600px at 90% 10%, rgba(94,234,212,.15), transparent 60%),
                  var(--bg);
      color:var(--text);
    }
    header{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: rgba(11,18,32,.70);
      border-bottom:1px solid var(--border);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:18px 16px;}
    .title{
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px;
      flex-wrap:wrap;
    }
    h1{margin:0;font-size:20px;letter-spacing:.2px;}
    .sub{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.35}
    .pillrow{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .pill{
      padding:6px 10px; border:1px solid var(--border);
      border-radius:999px; font-size:12px; color:var(--muted);
      background: rgba(255,255,255,.03);
    }
    .controls{
      display:grid;
      grid-template-columns: 1fr 160px 160px;
      gap:10px;
      margin-top:14px;
    }
    @media (max-width:820px){
      .controls{grid-template-columns:1fr 1fr; }
      .controls .full{grid-column:1 / -1;}
    }
    input, select, button{
      width:100%;
      padding:12px 12px;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      outline:none;
    }
    input::placeholder{color:rgba(234,241,255,.55)}
    button{
      cursor:pointer;
      transition:transform .05s ease, background .15s ease;
    }
    button:hover{background: rgba(255,255,255,.06)}
    button:active{transform:translateY(1px)}
    .btnrow{display:flex; gap:10px; margin-top:10px}
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      border-radius:12px;
      padding:10px 12px;
      font-size:13px;
    }
    .btn.secondary{color:var(--muted)}
    main{padding:18px 0 40px}
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top:14px;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardhead{
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
      padding:14px 14px 10px;
    }
    .kicker{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
      margin-bottom:6px;
    }
    .tag{
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      background: rgba(255,255,255,.03);
    }
    .tag.patient{color: rgba(94,234,212,.95); border-color: rgba(94,234,212,.30)}
    .tag.region{color: rgba(96,165,250,.95); border-color: rgba(96,165,250,.30)}
    .tag.kind{color: rgba(251,191,36,.95); border-color: rgba(251,191,36,.30)}
    .tag.alert{color: rgba(251,113,133,.95); border-color: rgba(251,113,133,.30)}
    .name{font-weight:700; font-size:16px; margin:0}
    .syn{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.35}
    .actions{
      display:flex; gap:8px; align-items:center;
      flex-shrink:0;
    }
    .iconbtn{
      width:auto;
      padding:9px 10px;
      border-radius:12px;
      font-size:12px;
      color:var(--muted);
    }
    details{
      border-top:1px solid var(--border);
      padding:0 0 6px;
    }
    summary{
      list-style:none;
      cursor:pointer;
      padding:12px 14px;
      color:var(--text);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    summary::-webkit-details-marker{display:none}
    .chev{color:var(--muted); font-size:12px}
    details[open] .chev{transform:rotate(180deg)}
    .body{
      padding:0 14px 14px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width:820px){
      .body{grid-template-columns:1fr}
    }
    .box{
      border:1px solid var(--border);
      border-radius:14px;
      padding:12px;
      background: rgba(0,0,0,.12);
    }
    .box h3{
      margin:0 0 8px;
      font-size:13px;
      color:rgba(234,241,255,.92);
      letter-spacing:.2px;
    }
    .box ul{
      margin:0; padding-left:16px;
      color:var(--muted);
      line-height:1.45;
      font-size:13px;
    }
    .box p{
      margin:0; color:var(--muted); font-size:13px; line-height:1.45;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color: rgba(234,241,255,.90);
      font-size:12px;
      background: rgba(255,255,255,.04);
      border:1px dashed rgba(255,255,255,.14);
      padding:10px;
      border-radius:12px;
      white-space:pre-wrap;
    }
    footer{
      border-top:1px solid var(--border);
      padding:16px 0 28px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
    }
    .toast{
      position:fixed;
      bottom:16px; left:50%;
      transform:translateX(-50%);
      background: rgba(18,26,43,.92);
      border:1px solid var(--border);
      padding:10px 12px;
      border-radius:999px;
      box-shadow: var(--shadow);
      color:var(--text);
      font-size:12px;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease, transform .18s ease;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-2px);
    }
    .small{
      font-size:11px;
      color:rgba(138,160,194,.95);
      margin-top:8px;
    }
    .divider{height:1px;background:var(--border);margin:10px 0}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <div class="title">
      <div>
        <h1>Laserterapia • Protocolos (Busca Rápida)</h1>
        <div class="sub">
          Use a busca para achar a condição em segundos. Tudo em um arquivo (offline).<br>
          Dica: no celular, “Adicionar à tela inicial” para virar um app.
        </div>
        <div class="pillrow">
          <span class="pill">Ctrl/⌘ + F também funciona</span>
          <span class="pill">Copiar protocolo em 1 toque</span>
          <span class="pill">Filtro por paciente/região</span>
        </div>
      </div>
      <div style="min-width:260px;max-width:360px">
        <div class="pill" style="border-color:rgba(251,191,36,.35);color:rgba(251,191,36,.95)">
          ⚠️ Guia de apoio — não substitui avaliação clínica, treinamento e normas locais.
        </div>
      </div>
    </div>

    <div class="controls">
      <input id="q" class="full" placeholder="Buscar: ex. fissura, mastite, otite, bronquiolite, candidíase, cesárea..." />
      <select id="patient">
        <option value="">Paciente (todos)</option>
        <option value="Puérpera">Puérpera</option>
        <option value="Pediatria">Pediatria</option>
      </select>
      <select id="region">
        <option value="">Região (todas)</option>
        <option value="Mama">Mama</option>
        <option value="Períneo/Cicatriz">Períneo/Cicatriz</option>
        <option value="Anal">Anal</option>
        <option value="MMII/Linfático">MMII/Linfático</option>
        <option value="Respiratório/Face">Respiratório/Face</option>
        <option value="Ouvido">Ouvido</option>
        <option value="Pele/Feridas">Pele/Feridas</option>
        <option value="Oral">Oral</option>
        <option value="Neuro">Neuro</option>
        <option value="Cefaleia">Cefaleia</option>
        <option value="Imunidade">Imunidade</option>
      </select>
    </div>

    <div class="btnrow">
      <button class="btn" id="reset">Limpar filtros</button>
      <button class="btn secondary" id="expandAll">Abrir tudo</button>
      <button class="btn secondary" id="collapseAll">Fechar tudo</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div id="stats" class="sub"></div>
  <div class="grid" id="list"></div>
</main>

<footer>
  <div class="wrap">
    <div><b>Notas de segurança rápidas:</b> óculos específicos para o comprimento de onda; evitar olhos e tireoide; cautela com fotossensibilizantes, tatuagens/pele escura, queimaduras recentes/cicatriz imatura; documentar avaliação e evolução.</div>
    <div class="divider"></div>
    <div><b>ILIB (regra prática):</b> tempo (min) = peso (kg) ÷ 2. (Ex.: 50 kg → 25 min)</div>
    <div class="small">Este arquivo foi estruturado a partir dos protocolos fornecidos nos seus PDFs (puerpério/amamentação e pediatria) e organizado para consulta rápida.</div>
  </div>
</footer>

<div class="toast" id="toast">Copiado ✅</div>

<script>
  // =========================
  // DADOS (edite/expanda aqui)
  // =========================
  const PROTOCOLS = [
    // --- PUERPÉRIO & AMAMENTAÇÃO ---
    {
      id: "PUE-2.1",
      title: "Fissuras Mamilares e Dor na Amamentação",
      patient: "Puérpera",
      region: "Mama",
      kind: "Protocolo",
      synopsis: "Analgesia + cicatrização do mamilo/aréola; apoio à manutenção do aleitamento.",
      objectives: [
        "Aliviar rapidamente a dor",
        "Acelerar cicatrização no mamilo/aréola",
        "Reduzir inflamação/edema local",
        "Prevenir infecção secundária",
        "Manter aleitamento"
      ],
      parameters: [
        "Vermelho: 1–2 J na aréola e mamilo",
        "Infravermelho: 2 J ao redor (4 pontos)",
        "Infravermelho: 3 J em linfonodos axilares",
        "Infravermelho: 3 J sub e supraclaviculares"
      ],
      technique: "Pontual. Varredura apenas se muita sensibilidade.",
      frequency: "A cada 24h.",
      duration: "Até cicatrização e remissão da dor (melhora em 24–48h; resolução em ~3–7 dias).",
      alerts: ["Ajustar tempo conforme potência do seu equipamento (dose é o mais importante)."]
    },
    {
      id: "PUE-2.2",
      title: "Ingurgitamento Mamário (Leite Empedrado)",
      patient: "Puérpera",
      region: "Mama",
      kind: "Protocolo",
      synopsis: "Reduz edema/dor, melhora drenagem e pega.",
      objectives: [
        "Reduzir edema, inflamação e dor",
        "Facilitar drenagem/fluxo lácteo",
        "Restaurar maleabilidade para pega",
        "Prevenir ducto obstruído/mastite"
      ],
      parameters: [
        "Infravermelho: 3–6 J por ponto no trajeto do ingurgitamento",
        "Infravermelho: 3 J linfonodos axilares",
        "Infravermelho: 3 J sub e supraclaviculares"
      ],
      technique: "Pontual.",
      frequency: "A cada 24h.",
      duration: "Geralmente 1–3 dias/sessões.",
      alerts: []
    },
    {
      id: "PUE-2.3",
      title: "Ductos Obstruídos / Bloqueados",
      patient: "Puérpera",
      region: "Mama",
      kind: "Protocolo",
      synopsis: "Aplicação localizada no nódulo + drenagem linfonodal.",
      objectives: [
        "Aliviar dor localizada",
        "Reduzir inflamação/edema ao redor",
        "Facilitar desobstrução e fluxo",
        "Prevenir progressão para mastite"
      ],
      parameters: [
        "Localizar nódulo e aplicar diretamente (pontual)",
        "Infravermelho: 3–4 J por ponto no trajeto (área adjacente)",
        "Infravermelho: 3 J linfonodos axilares",
        "Infravermelho: 3 J sub e supraclaviculares"
      ],
      technique: "Pontual (foco no nódulo) + pontos de drenagem.",
      frequency: "A cada 24h.",
      duration: "Geralmente 1–3 dias/sessões.",
      alerts: []
    },
    {
      id: "PUE-2.4",
      title: "Mastite",
      patient: "Puérpera",
      region: "Mama",
      kind: "Protocolo",
      synopsis: "Anti-inflamatório/analgésico; coadjuvante quando infecciosa.",
      objectives: [
        "Reduzir inflamação e edema",
        "Aliviar dor intensa",
        "Promover drenagem/fluxo lácteo",
        "Coadjuvar tratamento antibiótico quando infecciosa",
        "Prevenir abscesso"
      ],
      parameters: [
        "Infravermelho: 3–6 J por ponto na área acometida",
        "Infravermelho: 3 J linfonodos axilares",
        "Infravermelho: 3 J sub e supraclaviculares"
      ],
      technique: "Pontual.",
      frequency: "A cada 24h.",
      duration: "Em conjunto com condutas (esvaziamento, ATB quando indicado) até resolução (3–7 dias ou mais).",
      alerts: ["Se houver supuração/contaminação: considerar PDT (9 J V) conforme material."]
    },
    {
      id: "PUE-2.5",
      title: "Candidíase Mamária",
      patient: "Puérpera",
      region: "Mama",
      kind: "Protocolo",
      synopsis: "Coadjuvante ao antifúngico; atenção ao tratamento do bebê.",
      objectives: [
        "Aliviar dor intensa",
        "Reduzir eritema/inflamação",
        "Apoiar tratamento antifúngico",
        "Cicatrizar microlesões",
        "Manter aleitamento"
      ],
      parameters: [
        "PDT (vermelho): 9 J",
        "Infravermelho: 3–4 J por ponto no trajeto (edema/inflamação)",
        "Infravermelho: 3 J linfonodos axilares",
        "Infravermelho: 3 J sub e supraclaviculares"
      ],
      technique: "Pontual ou varredura.",
      frequency: "A cada 24h.",
      duration: "Geralmente 5–10 dias (até remissão mãe e bebê).",
      alerts: ["Tratamento da boca do bebê é essencial."]
    },
    {
      id: "PUE-2.6",
      title: "Cicatriz de Episiotomia e Lacerações Perineais",
      patient: "Puérpera",
      region: "Períneo/Cicatriz",
      kind: "Protocolo",
      synopsis: "Analgesia e cicatrização do períneo; considerar PDT se infecção.",
      objectives: [
        "Aliviar dor e desconforto",
        "Reduzir edema/inflamação",
        "Acelerar cicatrização",
        "Prevenir infecção/deiscência"
      ],
      parameters: [
        "Vermelho: 1–2 J por ponto no local da lesão",
        "Infravermelho: 2–3 J ao redor",
        "Infravermelho: 3 J em linfonodos inguinais",
        "Se infecção: PDT"
      ],
      technique: "Pontual ou varredura (se desconforto).",
      frequency: "A cada 24h.",
      duration: "Até resolução completa.",
      alerts: []
    },
    {
      id: "PUE-2.7",
      title: "Cicatriz de Cesariana (Pós-op imediato e tardio)",
      patient: "Puérpera",
      region: "Períneo/Cicatriz",
      kind: "Protocolo",
      synopsis: "Cicatrização, analgesia e prevenção de fibrose/queloide.",
      objectives: [
        "Aliviar dor pós-operatória",
        "Reduzir edema/inflamação",
        "Acelerar cicatrização",
        "Prevenir queloide/hipertrófica/aderências",
        "Melhorar estética e função"
      ],
      parameters: [
        "Vermelho: 1–2 J por ponto no local da lesão",
        "Infravermelho: 2–3 J ao redor",
        "Vermelho: 3 J em linfonodos inguinais",
        "Se infecção: PDT"
      ],
      technique: "Pontual ou varredura (se desconforto).",
      frequency: [
        "Imediato (até 7–10 dias): diário nos 3–5 primeiros dias",
        "Tardio (após ~10 dias): 2–3x/semana"
      ],
      duration: "5–15 sessões ou mais, conforme evolução/fibrose/queloide/dor.",
      alerts: []
    },
    {
      id: "PUE-2.8",
      title: "Hemorroidas e Fissuras Anais Pós-parto",
      patient: "Puérpera",
      region: "Anal",
      kind: "Protocolo",
      synopsis: "Analgesia e cicatrização local na crise.",
      objectives: [
        "Aliviar dor",
        "Reduzir inflamação/edema",
        "Acelerar cicatrização de fissura",
        "Diminuir sangramento",
        "Melhorar conforto evacuatório"
      ],
      parameters: [
        "Infravermelho: 3 J por ponto no local da lesão e ao redor",
        "Infravermelho: 3 J em linfonodos inguinais"
      ],
      technique: "Pontual.",
      frequency: "Diário por 3–5 dias na crise; depois 2–3x/semana conforme melhora.",
      duration: "Até remissão (geralmente 5–10 sessões).",
      alerts: []
    },
    {
      id: "PUE-2.9",
      title: "Edema/Linfedema em Membros Inferiores",
      patient: "Puérpera",
      region: "MMII/Linfático",
      kind: "Protocolo",
      synopsis: "Drenagem linfática e redução de edema em MMII.",
      objectives: [
        "Reduzir edema/inchaço",
        "Aliviar sensação de peso",
        "Melhorar circulação sanguínea/linfática",
        "Promover reabsorção de fluidos"
      ],
      parameters: [
        "Infravermelho: 3 J em linfonodos inguinais",
        "Infravermelho: 3 J em linfonodos poplíteos",
        "Infravermelho: 3 J em perimaleolares",
        "Infravermelho: 3 J em áreas edemaciadas"
      ],
      technique: "Pontual.",
      frequency: "Diário ou dias alternados (conforme intensidade).",
      duration: "Até redução significativa (5–10 sessões ou mais em linfedema persistente).",
      alerts: ["Pode associar ILIB (tempo: peso ÷ 2 min), conforme material."]
    },

    // --- PEDIATRIA ---
    {
      id: "PED-2.1",
      title: "Gripes, Resfriados e Rinite",
      patient: "Pediatria",
      region: "Respiratório/Face",
      kind: "Protocolo",
      synopsis: "Pontos faciais + cervicais + ILIB intranasal (ou alternativa).",
      objectives: [
        "Reduzir sintomas respiratórios e inflamatórios",
        "Auxiliar congestão nasal"
      ],
      parameters: [
        "2 J na lateral da asa do nariz (IG20)",
        "3 J gânglios cervicais",
        "2 J no polegar (P11)",
        "ILIB intranasal"
      ],
      technique: "Pontual.",
      frequency: [
        "Agudo: a cada 24h",
        "Crônico: 2–3x/semana"
      ],
      duration: "Reavaliar conforme quadro.",
      alerts: [
        "Se não permitir ILIB intranasal: 3–9 J na entrada das narinas + ILIB na artéria pediosa."
      ]
    },
    {
      id: "PED-2.2",
      title: "Sinusite",
      patient: "Pediatria",
      region: "Respiratório/Face",
      kind: "Protocolo",
      synopsis: "Seios da face + IG20 + cervicais + ILIB intranasal.",
      objectives: ["Reduzir inflamação/dor em seios da face", "Auxiliar drenagem nasal"],
      parameters: [
        "IG20 (lateral da asa do nariz): 2 J (cada lado)",
        "Gânglios cervicais: 3 J (cada lado)",
        "1–2 J por ponto nos seios da face (espaçados a cada ~1 cm²)",
        "ILIB intranasal"
      ],
      technique: "Pontual (pontos seriados).",
      frequency: [
        "Agudo: a cada 24h",
        "Crônico: 2–3x/semana"
      ],
      duration: "Reavaliar sempre.",
      alerts: []
    },
    {
      id: "PED-2.3",
      title: "Laringite",
      patient: "Pediatria",
      region: "Respiratório/Face",
      kind: "Protocolo",
      synopsis: "Associar pontos de rinite + pontos laterais à laringe (evitar tireoide).",
      objectives: ["Reduzir inflamação laríngea", "Auxiliar sintomas respiratórios superiores"],
      parameters: [
        "Aplicar pontos para rinite e adicionar:",
        "2 J por ponto lateralmente à laringe (desviando da tireoide)"
      ],
      technique: "Pontual.",
      frequency: "A cada 24h inicialmente; reavaliar sempre.",
      duration: "Conforme resposta clínica.",
      alerts: ["Evitar irradiação direta da tireoide."]
    },
    {
      id: "PED-2.4",
      title: "Amigdalite e Faringite",
      patient: "Pediatria",
      region: "Oral",
      kind: "Protocolo",
      synopsis: "Cavidade oral + gânglios cervicais; considerar PDT se contaminação.",
      objectives: ["Alívio de dor e inflamação orofaríngea", "Apoio à recuperação"],
      parameters: [
        "2 J em cada lado na cavidade oral",
        "2 J de cada lado nos gânglios cervicais",
        "Se contaminação: PDT"
      ],
      technique: "Pontual.",
      frequency: "A cada 24h inicialmente; reavaliar sempre.",
      duration: "Conforme resposta.",
      alerts: []
    },
    {
      id: "PED-2.5",
      title: "Otite",
      patient: "Pediatria",
      region: "Ouvido",
      kind: "Protocolo",
      synopsis: "Pontos ao redor da orelha + pavilhão + ILIB.",
      objectives: ["Reduzir dor e inflamação local", "Apoiar melhora do quadro"],
      parameters: [
        "1–2 J por ponto em volta da orelha (3–4 pontos)",
        "2–3 J no pavilhão auditivo",
        "ILIB: tempo = peso ÷ 2 (min)"
      ],
      technique: "Pontual.",
      frequency: "A cada 24h inicialmente; reavaliar sempre.",
      duration: "Conforme evolução.",
      alerts: []
    },
    {
      id: "PED-2.6",
      title: "Bronquiolite, Bronquite, Pneumonia e Asma",
      patient: "Pediatria",
      region: "Respiratório/Face",
      kind: "Protocolo",
      synopsis: "Pontos respiratórios + caixa torácica (dose por cm²) + ILIB.",
      objectives: ["Modular inflamação e sintomas respiratórios", "Auxiliar recuperação"],
      parameters: [
        "IG20: 2 J cada lado",
        "Gânglios cervicais: 3 J cada lado",
        "P11 (polegar): 2 J",
        "ILIB intranasal",
        "2 J por cm² na região acometida da caixa torácica"
      ],
      technique: "Pontual + pontos seriados/área.",
      frequency: "A cada 24h inicialmente; reavaliar sempre.",
      duration: "Conforme quadro.",
      alerts: []
    },
    {
      id: "PED-3.1",
      title: "Dermatite (com opção de PDT se infecção)",
      patient: "Pediatria",
      region: "Pele/Feridas",
      kind: "Protocolo",
      synopsis: "Leito + bordas; PDT com azul de metileno se infecção.",
      objectives: ["Acelerar cicatrização", "Reduzir prurido/inflamação", "Apoiar controle de infecção quando presente"],
      parameters: [
        "1 J por cm² no leito da lesão",
        "Se prurido: 1–2 J por cm² em volta do local",
        "Se infecção: PDT (Azul de Metileno)",
        "ILIB na braquial ou pediosa"
      ],
      technique: "Pontual ou varredura (calcular área).",
      frequency: "Conforme evolução (24–48h).",
      duration: "Até resolução.",
      alerts: []
    },
    {
      id: "PED-3.2",
      title: "Queimadura (com opção de PDT se infecção)",
      patient: "Pediatria",
      region: "Pele/Feridas",
      kind: "Protocolo",
      synopsis: "Leito + bordas; PDT se infecção; ILIB opcional.",
      objectives: ["Acelerar reparo", "Reduzir prurido/inflamação", "Apoiar controle de infecção quando presente"],
      parameters: [
        "1 J por cm² no leito da lesão",
        "1–2 J por cm² nas bordas",
        "Se infecção: PDT (Azul de Metileno)",
        "ILIB na braquial ou pediosa"
      ],
      technique: "Pontual ou varredura (calcular área).",
      frequency: "Conforme evolução (24–48h).",
      duration: "Até resolução.",
      alerts: []
    },
    {
      id: "PED-3.3",
      title: "Assadura",
      patient: "Pediatria",
      region: "Pele/Feridas",
      kind: "Protocolo",
      synopsis: "Pontual ou varredura (mais confortável no períneo); atenção ao Cavilon.",
      objectives: ["Reduzir inflamação/dor", "Acelerar recuperação da pele", "Orientar cuidado local"],
      parameters: [
        "Pontual: 0,5–2 J por ponto",
        "Varredura: calcular área (ex.: 6 pontos x 1 J = 6 J para varrer toda a área do exemplo)",
        "Se for por fungo: PDT (Azul de Metileno)"
      ],
      technique: "Pontual ou varredura (varredura costuma ser mais confortável no períneo).",
      frequency: [
        "Boa evolução: reaplicar em 48h",
        "Sem evolução: reaplicar em 24h"
      ],
      duration: "Até resolução.",
      alerts: ["Suspender Cavilon 48h antes da aplicação (conforme material)."]
    },
    {
      id: "PED-3.4",
      title: "Picada por Inseto",
      patient: "Pediatria",
      region: "Pele/Feridas",
      kind: "Protocolo",
      synopsis: "Borda + centro se houver ferida.",
      objectives: ["Reduzir reação local", "Acelerar melhora da pele"],
      parameters: [
        "1–2 J por ponto em volta da lesão",
        "Se ferir: 1 J no centro da lesão"
      ],
      technique: "Pontual.",
      frequency: "Conforme resposta.",
      duration: "Até melhora.",
      alerts: []
    },
    {
      id: "PED-3.5",
      title: "Coto Umbilical",
      patient: "Pediatria",
      region: "Pele/Feridas",
      kind: "Protocolo",
      synopsis: "Bordas + centro; cautela com coto escurecido.",
      objectives: ["Apoiar cicatrização/epitelização", "Reduzir risco de complicação local"],
      parameters: [
        "1 J nas bordas",
        "1 J no centro"
      ],
      technique: "Pontual.",
      frequency: "24–48h (coto gelatinoso pode exigir mais frequência).",
      duration: "Até evolução satisfatória.",
      alerts: ["Em mumificação: cuidado com aquecimento; não aplicar sobre região escurecida (conforme material)."]
    },
    {
      id: "PED-4.5",
      title: "Monilíase Oral (Sapinho) – PDT",
      patient: "Pediatria",
      region: "Oral",
      kind: "PDT",
      synopsis: "PDT com azul de metileno + dose por cm².",
      objectives: ["Apoiar controle fúngico", "Reduzir dor/inflamação"],
      parameters: [
        "PDT: aplicar Azul de Metileno",
        "PDT: 5–9 J por cm²"
      ],
      technique: "Pontual ou varredura (conforme área).",
      frequency: "A cada 24–48h.",
      duration: "Até remissão.",
      alerts: []
    },
    {
      id: "PED-5.1",
      title: "TDAH / Autismo (protocolo de pontos cranianos + ILIB)",
      patient: "Pediatria",
      region: "Neuro",
      kind: "Protocolo",
      synopsis: "Pontos em lobos cerebrais + ILIB intranasal (regra peso/2).",
      objectives: ["Suporte complementar (não substitui terapias/seguimento especializado)"],
      parameters: [
        "ILIB intranasal: tempo = peso ÷ 2",
        "4–6 J por ponto em lobo frontal, temporal e occipital"
      ],
      technique: "Pontual.",
      frequency: "Conforme planejamento e reavaliação.",
      duration: "Ciclos conforme objetivo.",
      alerts: ["Usar como coadjuvante e sempre com acompanhamento multiprofissional."]
    },
    {
      id: "PED-6",
      title: "Cefaleia em Crianças e Adolescentes",
      patient: "Pediatria",
      region: "Cefaleia",
      kind: "Protocolo",
      synopsis: "Aplicar na região da dor + ILIB intranasal.",
      objectives: ["Alívio de dor", "Modulação de inflamação/hipersensibilização"],
      parameters: [
        "2–3 J por ponto na região da dor (frontal/têmporas/occipital)",
        "Se occipital: 2–3 J por ponto no trajeto do nervo occipital",
        "ILIB intranasal"
      ],
      technique: "Pontual.",
      frequency: "A cada 24–48h.",
      duration: "Conforme resposta.",
      alerts: ["Identificar causa e localização antes de escolher pontos."]
    },
    {
      id: "PED-8.5",
      title: "Imunidade – ILIB",
      patient: "Pediatria",
      region: "Imunidade",
      kind: "ILIB",
      synopsis: "ILIB em diferentes regiões; tempo peso/2 (min).",
      objectives: ["Suporte imunológico em ciclos (conforme planejamento)"],
      parameters: [
        "ILIB: tempo = peso ÷ 2 (min)",
        "Locais possíveis: artéria pediosa, artéria radial, intranasal, sublingual"
      ],
      technique: "Conforme equipamento e tolerância.",
      frequency: "Em ciclos conforme protocolo (planejamento).",
      duration: "30 sessões em 3 ciclos (exemplo do material).",
      alerts: []
    }
  ];

  // =========================
  // UI
  // =========================
  const elList = document.getElementById("list");
  const elStats = document.getElementById("stats");
  const elQ = document.getElementById("q");
  const elPatient = document.getElementById("patient");
  const elRegion = document.getElementById("region");
  const elToast = document.getElementById("toast");

  const norm = (s="") => s.toString().toLowerCase()
    .normalize("NFD").replace(/[\u0300-\u036f]/g,"");

  function toast(msg="Copiado ✅"){
    elToast.textContent = msg;
    elToast.classList.add("show");
    setTimeout(()=>elToast.classList.remove("show"), 1200);
  }

  function makeCopyText(p){
    const freq = Array.isArray(p.frequency) ? p.frequency.join(" | ") : p.frequency;
    const alerts = (p.alerts && p.alerts.length) ? ("\nALERTAS/OBS:\n- " + p.alerts.join("\n- ")) : "";
    return (
`[${p.id}] ${p.title}
Paciente: ${p.patient} | Região: ${p.region} | Tipo: ${p.kind}

OBJETIVOS:
- ${p.objectives.join("\n- ")}

PARÂMETROS:
- ${p.parameters.join("\n- ")}

TÉCNICA: ${p.technique}
FREQUÊNCIA: ${freq}
DURAÇÃO: ${p.duration}${alerts}`
    );
  }

  function tagHTML(p){
    const alertTag = (p.alerts && p.alerts.length) ? `<span class="tag alert">OBS</span>` : "";
    return `
      <div class="kicker">
        <span class="tag patient">${p.patient}</span>
        <span class="tag region">${p.region}</span>
        <span class="tag kind">${p.kind}</span>
        <span class="tag">${p.id}</span>
        ${alertTag}
      </div>
    `;
  }

  function render(list){
    elList.innerHTML = "";
    if(!list.length){
      elStats.textContent = "Nenhum protocolo encontrado com os filtros atuais.";
      return;
    }
    elStats.textContent = `${list.length} protocolo(s) encontrado(s).`;

    for(const p of list){
      const freq = Array.isArray(p.frequency) ? `<ul>${p.frequency.map(x=>`<li>${x}</li>`).join("")}</ul>` : `<p>${p.frequency}</p>`;
      const alerts = (p.alerts && p.alerts.length)
        ? `<ul>${p.alerts.map(x=>`<li>${x}</li>`).join("")}</ul>`
        : `<p>—</p>`;

      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="cardhead">
          <div>
            ${tagHTML(p)}
            <p class="name">${p.title}</p>
            <p class="syn">${p.synopsis}</p>
          </div>
          <div class="actions">
            <button class="iconbtn" data-copy="${p.id}">Copiar</button>
          </div>
        </div>

        <details>
          <summary>
            <span>Ver detalhes do protocolo</span>
            <span class="chev">▾</span>
          </summary>

          <div class="body">
            <div class="box">
              <h3>Objetivos</h3>
              <ul>${p.objectives.map(x=>`<li>${x}</li>`).join("")}</ul>
            </div>

            <div class="box">
              <h3>Parâmetros</h3>
              <ul>${p.parameters.map(x=>`<li>${x}</li>`).join("")}</ul>
            </div>

            <div class="box">
              <h3>Técnica</h3>
              <p>${p.technique}</p>
              <div class="small">* Ajuste tempo conforme potência do seu equipamento; foque na dose.</div>
            </div>

            <div class="box">
              <h3>Frequência / Duração</h3>
              <div><b style="font-size:12px;color:rgba(234,241,255,.90)">Frequência</b>${freq}</div>
              <div class="divider"></div>
              <div><b style="font-size:12px;color:rgba(234,241,255,.90)">Duração</b><p>${p.duration}</p></div>
            </div>

            <div class="box" style="grid-column:1 / -1">
              <h3>Texto rápido (para copiar/colar no prontuário)</h3>
              <div class="mono" id="mono-${p.id}">${escapeHtml(makeCopyText(p))}</div>
              <div class="btnrow" style="margin-top:10px">
                <button class="btn secondary" data-copy="${p.id}">Copiar texto</button>
                <button class="btn secondary" data-print="${p.id}">Imprimir este protocolo</button>
              </div>
            </div>

            <div class="box" style="grid-column:1 / -1">
              <h3>Alertas / Observações</h3>
              ${alerts}
            </div>
          </div>
        </details>
      `;
      elList.appendChild(card);
    }

    // bind copy + print
    document.querySelectorAll("[data-copy]").forEach(btn=>{
      btn.addEventListener("click", async ()=>{
        const id = btn.getAttribute("data-copy");
        const p = PROTOCOLS.find(x=>x.id===id);
        const text = makeCopyText(p);
        try{
          await navigator.clipboard.writeText(text);
          toast("Copiado ✅");
        }catch(e){
          // fallback
          const ta = document.createElement("textarea");
          ta.value = text;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          toast("Copiado ✅");
        }
      });
    });

    document.querySelectorAll("[data-print]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const id = btn.getAttribute("data-print");
        const p = PROTOCOLS.find(x=>x.id===id);
        printProtocol(p);
      });
    });
  }

  function escapeHtml(str){
    return str.replace(/[&<>"']/g, (m)=>({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  function filtered(){
    const q = norm(elQ.value.trim());
    const patient = elPatient.value;
    const region = elRegion.value;

    return PROTOCOLS.filter(p=>{
      if(patient && p.patient !== patient) return false;
      if(region && p.region !== region) return false;

      if(!q) return true;

      const hay = norm([
        p.id, p.title, p.patient, p.region, p.kind, p.synopsis,
        ...(p.objectives||[]), ...(p.parameters||[]),
        p.technique, Array.isArray(p.frequency) ? p.frequency.join(" ") : p.frequency,
        p.duration, ...(p.alerts||[])
      ].join(" | "));

      return hay.includes(q);
    });
  }

  function update(){
    render(filtered());
  }

  function setAllDetails(open){
    document.querySelectorAll("details").forEach(d=>d.open = open);
  }

  function printProtocol(p){
    const freq = Array.isArray(p.frequency) ? p.frequency.join(" | ") : p.frequency;
    const html = `
      <html><head><meta charset="utf-8"/>
      <title>Imprimir • ${p.title}</title>
      <style>
        body{font-family:Arial, sans-serif; padding:18px; line-height:1.35}
        h1{margin:0 0 8px; font-size:18px}
        .meta{color:#444; font-size:12px; margin-bottom:12px}
        .box{border:1px solid #ccc; padding:12px; border-radius:10px; margin:10px 0}
        ul{margin:8px 0 0; padding-left:18px}
        .warn{font-size:11px; color:#666; margin-top:12px}
      </style></head><body>
        <h1>[${p.id}] ${p.title}</h1>
        <div class="meta">Paciente: ${p.patient} • Região: ${p.region} • Tipo: ${p.kind}</div>

        <div class="box"><b>Objetivos</b>
          <ul>${p.objectives.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
        </div>

        <div class="box"><b>Parâmetros</b>
          <ul>${p.parameters.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>
        </div>

        <div class="box"><b>Técnica</b><div>${escapeHtml(p.technique)}</div></div>
        <div class="box"><b>Frequência</b><div>${escapeHtml(freq)}</div></div>
        <div class="box"><b>Duração</b><div>${escapeHtml(p.duration)}</div></div>

        <div class="box"><b>Alertas/Observações</b>
          <ul>${(p.alerts && p.alerts.length) ? p.alerts.map(x=>`<li>${escapeHtml(x)}</li>`).join("") : "<li>—</li>"}</ul>
        </div>

        <div class="warn">Guia de apoio: não substitui avaliação clínica, treinamento e normas locais. Ajuste tempo conforme potência do equipamento (dose é o principal).</div>
      </body></html>
    `;
    const w = window.open("", "_blank");
    w.document.open();
    w.document.write(html);
    w.document.close();
    w.focus();
    w.print();
  }

  // events
  elQ.addEventListener("input", update);
  elPatient.addEventListener("change", update);
  elRegion.addEventListener("change", update);

  document.getElementById("reset").addEventListener("click", ()=>{
    elQ.value = "";
    elPatient.value = "";
    elRegion.value = "";
    update();
    toast("Filtros limpos ✅");
  });

  document.getElementById("expandAll").addEventListener("click", ()=>setAllDetails(true));
  document.getElementById("collapseAll").addEventListener("click", ()=>setAllDetails(false));

  // init
  update();
</script>
</body>
</html>
